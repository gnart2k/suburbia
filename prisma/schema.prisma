generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Product {
  id                                     String   @id @default(uuid())
  quantity                               Int
  catalogItemId                          String
  appId                                  String
  variantId                              String
  productNameOriginal                    String
  productNameTranslated                  String
  url                                    String
  priceAmount                            Int
  convertedPriceAmount                   Int
  priceFormatted                         String
  convertedPriceFormatted                String
  fullPriceAmount                        String
  convertedFullPriceAmount               String
  fullPriceFormatted                     String
  convertedFullPriceFormatted            String
  priceBeforeDiscountsAmount             String
  convertedPriceBeforeDiscountsAmount    String
  priceBeforeDiscountsFormatted          String
  convertedPriceBeforeDiscountsFormatted String
  image                                  String
  availabilityStatus                     String
  quantityAvailable                      Int
  sku                                    String
  shippable                              Boolean
  paymentOption                          String
  membersOnly                            Boolean
  rootCatalogItemId                      String
  customLineItem                         Boolean
  priceUndetermined                      Boolean
  fixedQuantity                          Boolean
  savePaymentMethod                      Boolean
  inventoryAppId                         String
  policies                               Json
  createdAt                              DateTime @default(now())
  updatedAt                              DateTime @updatedAt
  OrderProduct OrderProduct[]
}

model UserInfo {
  id              String @id @default(cuid())
  firstName       String
  lastName        String
  email           String @unique
  phone           String
  shippingAddress String
  province        String
  district        String
  ward            String
  addressDetail   String
}

model Order {
  id         String    @id @default(cuid())
  userInfoid String
  status     String?   @default("processing")
  amount     String
  paymentUrl String?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime?

  products OrderProduct[]
}

model OrderProduct {
  orderId   String
  productId String
  order     Order   @relation(fields: [orderId], references: [id])
  product   Product @relation(fields: [productId], references: [id])

  @@id([orderId, productId]) // Composite primary key
}